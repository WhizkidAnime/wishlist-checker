---
description: 
globs: 
alwaysApply: true
---
---
description: "Правила для AI-ассистента ('Windsurf') при разработке одностраничного приложения 'Мой Вишлист'"
globs: ["**/*.{js,jsx,ts,tsx,html,css}"] # Применяем к JS/React/TS, HTML и CSS файлам
alwaysApply: true
---

# Правила разработки приложения "Мой Вишлист"

## 1. Общие принципы и взаимодействие с AI

*   **Цель проекта:** Создание прогрессивного веб-приложения (PWA) для управления списком желаний с системой категорий и темной темой. Дизайн минималистичный, вдохновленный главной страницей ChatGPT (центральный блок-карточка с тенью и скруглениями на простом фоне). Данные хранятся в Local Storage.
*   **PWA статус:** Приложение полностью готово для установки на любое устройство с кастомными иконками, standalone режимом и cross-platform поддержкой.
*   **Система категорий:** Реализована полная система категорий с вкладками, инлайн созданием, фильтрацией и персистентностью.
*   **Система тем:** Реализована полная система переключения между светлой и темной темой с персистентностью и плавными переходами.
*   **Пошаговая разработка:** Всегда фокусируйся **только на текущем шаге**, описанном в запросе пользователя. Не пытайся реализовать функционал из будущих шагов.
*   **Контекст:** Помни, что мы используем **React** (с функциональными компонентами и хуками) и **Tailwind CSS** для стилизации.
*   **Качество кода:** Генерируемый код должен быть чистым, понятным, современным (ES6+), поддерживаемым и следовать лучшим практикам React и JavaScript.
*   **Завершенность шага:** Предоставляй полный, рабочий код для выполнения конкретного шага (например, целый компонент или функцию), включая необходимые импорты и базовую структуру.
*   **Зависимости:** Четко указывай, какие библиотеки нужно установить или импортировать для работы сгенерированного кода.

## 2. React и JavaScript/TypeScript

*   **Компоненты:** Используй **функциональные компоненты** с **хуками** (`useState`, `useEffect`, `useContext` и т.д.).
*   **Архитектура:** Проект использует централизованное состояние в App.tsx с props drilling. Специализированные хуки: `useCategories` для управления категориями, `useTheme` для управления темами.
*   **Структура:** Придерживайся логичной структуры папок и файлов (например, `src/components`, `src/hooks`, `src/utils`). Компоненты должны быть по возможности небольшими и переиспользуемыми.
*   **Состояние:** Для управления состоянием используй встроенные хуки React (`useState`, `useReducer`). Для глобального состояния (если понадобится, например, для курсов валют) можно использовать `useContext`.
*   **Props:** Используй понятные имена для props. Если используется TypeScript, всегда определяй типы для props (interfaces). Если JavaScript – желательно использовать `PropTypes` для валидации.
*   **Чистота кода:** Используй осмысленные имена переменных и функций. Избегай излишне вложенных конструкций. Добавляй комментарии только для сложной или неочевидной логики.
*   **Асинхронность:** Используй `async/await` для асинхронных операций (например, для запроса курсов валют). Обеспечь обработку ошибок (блоки `try...catch`).

## 3. Tailwind CSS и Стилизация

*   **Основной инструмент:** **Tailwind CSS** является *единственным* инструментом для стилизации. Избегай написания отдельного CSS или использования `<style>` тегов, кроме как для базовых глобальных стилей в `index.css` (например, импорт Tailwind директив и CSS переменные для тем).
*   **Система тем:** Используй CSS переменные через :root для динамического переключения тем. Классы должны использовать кастомные свойства (например, `bg-theme-card`, `text-theme-primary`).
*   **Дизайн "а-ля ChatGPT":** Строго придерживайся заданного стиля:
    *   Нейтральный фон страницы (светлый: `bg-gray-50`, темный: `bg-gray-900`).
    *   Основной контент в центральном блоке (`max-w-4xl`, `mx-auto`, `bg-white`/`bg-gray-800`).
    *   Закругленные углы (`rounded-3xl`).
    *   Тени (`shadow-lg`).
    *   Достаточные внутренние (`p-4` / `p-8`) и внешние (`py-6` / `py-12`) отступы.
*   **Mobile-First:** Всегда разрабатывай стили с подходом **Mobile-First**. Сначала стили для малых экранов, затем добавляй префиксы (`sm:`, `md:`, `lg:`) для адаптации к большим экранам.
*   **Консистентность:** Используй согласованные значения для отступов, размеров шрифтов, цветов из палитры Tailwind. Не создавай избыточных кастомных классов, если можно обойтись утилитами Tailwind.
*   **Интерактивность:** Применяй классы Tailwind для состояний `:hover`, `:focus`, `:active` для всех интерактивных элементов (кнопки, ссылки, поля ввода, чекбоксы). Используй `transition-colors` для плавности переключения тем.

## 4. Управление данными (Local Storage)

*   **Источник данных:** На данном этапе единственным источником хранения пользовательских данных (списка желаний, категорий и темы) является **Local Storage** браузера.
*   **Тройное хранение:** Товары сохраняются в ключе `'wishlistItems'`, категории в `'wishlistCategories'`, тема в `'theme'`.
*   **Сериализация:** Всегда используй `JSON.stringify()` при сохранении данных в Local Storage и `JSON.parse()` при их чтении.
*   **Обработка ошибок:** Добавляй обработку ошибок (`try...catch`) при чтении и парсинге данных из Local Storage на случай поврежденных данных или их отсутствия.
*   **Структура данных:** Придерживайся согласованной структуры объекта для элемента вишлиста (например, `{ id, itemType, name, link, price, currency, isBought, category? }`).

## 5. PWA, Система категорий и Темы

*   **PWA конфигурация:** Проект полностью настроен как PWA с manifest.json, кастомными иконками и standalone режимом.
*   **Категории:** Реализована умная система категорий где "Все" показывает только товары без категории, а поиск работает глобально.
*   **Темы:** Реализован переключатель "солнце/луна" с адаптивным позиционированием (мобильные - рядом с заголовком, десктоп - fixed в углу).
*   **Иконки:** Используются векторные SVG иконки с градиентным дизайном для всех размеров экранов.
*   **Кроссплатформенность:** Полная поддержка iOS Safari, Android Chrome, Desktop браузеров.

## 6. Структура, Документация и Связи

*   **Импорты/Экспорты:** Убедись, что все компоненты и функции корректно экспортируются и импортируются там, где они используются.
*   **Комментарии:** Добавляй краткие комментарии для объяснения назначения компонентов, хуков или сложных участков кода.
*   **Читаемость:** Форматируй код для лучшей читаемости (отступы, переносы строк). Можно использовать Prettier с настройками по умолчанию.

## 7. Паттерны проекта (Выученные)

*   **Хуки специализированы:** Каждый хук отвечает за свою область (useTheme, useCategories, useWishlist).
*   **Адаптивное позиционирование:** Компоненты должны адаптироваться к мобильным и десктопным экранам.
*   **Переходы:** Всегда используй `transition-colors duration-200` для плавности переключения тем.
*   **Условный рендеринг:** Активно используй тернарные операторы для показа/скрытия элементов в зависимости от состояния.
*   **Персистентность:** Все пользовательские настройки (тема, категории) должны сохраняться в localStorage.